# 12.1. Alcance de la implementación
###  **1. Módulo de Gestión de Equipos**

#### **1.1. Gestión Fundamental de Equipos**
Esta sección cubre las funcionalidades básicas para el registro y la consulta de cada activo.


* **1.1.1. Registro y Datos Maestros de Equipos:**
    * **Captura de Información Esencial:**
        * `COD_Equipos`: Código único e identificador principal del equipo.
        * `Nombre_equipo`: Denominación descriptiva del activo.
        * `ID_Tipo_Maquina`: Clasificación del equipo (vinculado al Catálogo de Tipos de Máquina).
        * `ID_Estado_equipo`: Estado operativo actual del equipo (vinculado al Catálogo de Estados de Equipo).
        * `Fecha_registro`: Fecha de incorporación del equipo al sistema.
        * `Fecha_salida`: Fecha opcional de baja o retiro definitivo del servicio.
        * `Detalle`: Campo para cualquier descripción adicional o notas relevantes.
    * **Gestión de Registros (CRUD):** Interfaz dedicada para la creación, lectura, actualización y eliminación de equipos.

* **1.1.2. Listado y Búsqueda de Equipos:**
    * **Visualización:** Presentación clara de los equipos en formato de tabla o lista.
    * **Funcionalidades de Búsqueda:** Búsqueda rápida por `COD_Equipos`, `Nombre_equipo`, tipo de máquina, estado, etc.
    * **Opciones de Filtrado y Ordenamiento:** Capacidad para filtrar y ordenar los resultados según diversos criterios.


#### **1.2. Catálogos de Referencia (Maestras)**
Aseguran la estandarización y la integridad de los datos maestros.
* **2.2.1. Catálogo de Tipos de Máquina (`Tipo_Maquina`):**
    * **Estructura:** Tabla con `ID_Tipo_Maquina` (identificador único) y `Descripcion` (ej: "Motor", "Bomba Centrífuga", "Transportador").
    * **Gestión:** Interfaz para administrar y mantener la lista de tipos de máquinas.

* **1.2.2. Catálogo de Estados de Equipo (`Estado_Equipo`):**
    * **Estructura:** Tabla con `ID_Estado_equipo` (identificador único, ej: "OPE", "FSE", "MNT") y `Descripcion` (ej: "Operativo", "Fuera de Servicio", "En Mantenimiento").
    * **Gestión:** Interfaz para administrar y mantener la lista de estados de los equipos.
    * **Consideración Crítica:** Es **fundamental** que los `ID_Estado_equipo` definidos en esta tabla sean idénticos y consistentes con los utilizados en el proceso batch PL/pgSQL para evitar errores de integridad referencial.

#### **1.3. Gestión del Mantenimiento**
Componente vital para la disponibilidad y optimización de la vida útil de los equipos.


* **1.3.1. Programación de Mantenimientos (`PROG_MANTENIMIENTOS`):**
    * **Identificación y Vinculación:** `COD_PROG_MANTENIMIENTOS`, `ID_EQUIPOS` (enlace al equipo afectado).
    * **Logística:** `Empresa_encargada`.
    * **Clasificación:** `ID_Estado_mantenimiento` (si existe un catálogo de estados específicos de mantenimiento).
    * **Período:** `Fecha_de_inicio`, `Fecha_de_fin` de la actividad.
    * **Recursos:** `ID_MAQUINAS_SUSTITUTAS` (opcional, si se registra el uso de equipos de reemplazo).
    * **Funcionalidades:** Interfaz completa para crear, editar, eliminar y visualizar programaciones de mantenimiento.
    * **Recurrencia:** Posibilidad de configurar mantenimientos recurrentes (ej: mensual, anual).

* **1.3.2. Historial de Mantenimientos:**
    * **Visibilidad Completa:** Visualización detallada de todos los mantenimientos históricos realizados a un equipo específico.
    * **Informes:** Capacidad para generar informes sobre el cumplimiento del mantenimiento, tiempos de inactividad, etc.

* **1.3.3. Integración con el Proceso Batch:**
    * El **Proceso Batch de `Actualización Consolidada del Estado de Equipos`** (descrito en detalle más adelante) es un pilar fundamental para este módulo, garantizando que el estado de los equipos se actualice automáticamente en función de estas programaciones.
    * Debe ser programado para ejecutarse periódicamente (ej: cada 24 horas).

#### **1.4. Gestión de Asignaciones (Condicional)**
Esta sección se incluirá si la asignación de equipos a áreas o tareas es un requisito.


* **1.4.1. Planificación de Asignaciones (`PLANIFICACIONES_ASIGNACION`):**
    * **Identificación:** `COD_PLANIFICACIONES_ASIGNACION`.
    * **Ubicación:** `ID_Area` (vinculado a un catálogo de áreas).
    * **Equipo Asignado:** `ID_EQUIPOS`.
    * **Responsabilidad:** `ID_Empleado_Solicita` (empleado que solicita/es responsable).
    * **Duración:** `Fecha_de_asignacion`, `Fecha_de_vencimiento`.
    * **Descripción:** `Descripcion_de_tarea`.
    * **Funcionalidades:** Interfaz para crear, editar y eliminar registros de asignación de equipos.

### **2. Proceso Batch: Automatización y Consistencia**

Este proceso es crítico para la coherencia y automatización del estado de los equipos.


* **3.1. Proceso Principal:** `Actualización Consolidada del Estado de Equipos`.
    * **Función:** Proceso automático basado en PL/pgSQL que evalúa el estado de cada equipo con una lógica de prioridad:
        1.  **Mantenimiento (`MNT`):** Si existe una `PROG_MANTENIMIENTOS` activa (`Fecha_de_inicio <= HOY <= Fecha_de_fin`).
        2.  **Fuera de Servicio (`FSE`):** Si no está en mantenimiento, pero su `Fecha_salida` es `HOY` o anterior.
        3.  **Operativo (`OPE`):** Si no cumple las condiciones anteriores.
    * **Impacto:** Actualiza el `ID_Estado_equipo` en `EQUIPOS` y registra el cambio en `Historial_Estado_Equipo`.

* **3.3. Monitoreo:**
    * Establecer mecanismos para monitorear la correcta ejecución del proceso batch y notificar posibles errores.

---

### 3. Módulo de Recepción
*3.1. Gestión Fundamental de Recepciones*
Esta sección cubre las funcionalidades esenciales para el registro, consulta y gestión de las recepciones de productos.

* 3.1.1. Registro y Datos Maestros de Recepciones:
Captura de Información Esencial:

COD_Recepcion: Código único e identificador principal de la recepción (ej. REC00001).

ID_Tipo_Producto: Clasificación del producto recibido (vinculado a un catálogo de tipos).

ID_Proveedor: Identificador del proveedor que envía el producto.

Fecha_recepcion: Fecha y hora de ingreso al sistema.

Responsable_recepcion: Usuario o personal encargado de validar la recepción.

Estado_recepcion: Estado actual del proceso (ej. PEN, APR, OBS, ANU).

Observaciones: Campo de texto libre para notas adicionales.

Gestión de Registros (CRUD):

Interfaz para crear nuevas recepciones, consultar, editar y anular registros.

Validación de reglas de negocio según el estado (PEN, APR, etc.).

* 3.1.2. Listado y Búsqueda de Recepciones:
Visualización:

Tabla interactiva que muestra las recepciones registradas.

Funcionalidades de Búsqueda:

Búsqueda rápida por COD_Recepcion, producto, proveedor, estado, o responsable.

Opciones de Filtrado y Ordenamiento:

Filtros por rango de fechas, estado, tipo de producto, etc.

Orden por fecha de recepción o código.

*3.2. Catálogos de Referencia (Maestras)*
* 3.2.1. Catálogo de Tipos de Producto (Tipo_Producto):
Estructura: ID_Tipo_Producto, Descripcion (ej. "Fertilizante", "Semilla", "Herramienta").

Gestión: Interfaz para mantenimiento (alta/baja/modificación).

* 3.2.2. Catálogo de Estados de Recepción (Estado_Recepcion):
Estructura: ID_Estado_Recepcion (ej: PEN, APR, OBS, ANU), Descripcion.

Importancia Crítica: Deben coincidir con los utilizados por el proceso batch de actualización.

*3.3. Gestión de Lotes (vinculados a una Recepción)*
* 3.3.1. Registro de Lotes (Lote):
Datos Capturados:

COD_Lote: Código único generado automáticamente (LOT00001, LOT00002...).

ID_Tipo_Lote: Tipo de lote (ej. materia prima, producto terminado).

Cantidad_total: Número total de unidades.

Unidad: Unidad de medida (ej. kg, l, unidades).

Fecha_produccion y Fecha_vencimiento: Fechas clave del producto.

ID_Producto: Producto específico recibido.

ID_Estado_Lote: Estado actual del lote (PT, VEN, etc.).

Vinculación a la recepción mediante ID_Recepcion.

*3.4. Proceso Batch: Validación y Actualización de Estados de Recepción*
* 3.4.1. Objetivo:
Actualizar automáticamente el estado de las recepciones, según reglas de negocio, para asegurar consistencia del inventario y seguimiento adecuado.

* 3.4.2. Lógica Propuesta:
Entrada: Tabla Recepcion, columnas: Estado_recepcion, Fecha_recepcion, ID_Proveedor, entre otras.

Condiciones Lógicas (ejemplo base):

Si han pasado más de 5 días desde la Fecha_recepcion sin aprobar (Estado = 'PEN'), marcar como OBS.

Si todos los lotes vinculados a la recepción están en estado PT, cambiar la recepción a APR.

Actualización Condicional:

Solo se actualizan registros cuyo estado actual difiera del calculado.

Registro de Historial (opcional):

Insertar en una tabla Historial_Estado_Recepcion para trazabilidad.
